<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>Resportes</title>
    <style type="text/css">
        body {
            background-image:url('https://cdn.discordapp.com/attachments/771508386452734003/963929999612739604/bloquea.jpg');
            background-attachment: fixed;
            background-size: cover;
        }
        .table-striped>tbody>tr:nth-of-type(odd){
            background-color: #0000000 !important;
        }

    </style>
</h:head>
<p:button value="Atras" outcome="resource"/>
<h:body>
    <h1> Reportes </h1>
    <h2>Recursos Mas Usados</h2>
    <br/>
    <div><p:chart type="bar" model="#{recursosMasUsados.grafico}"/></div>
    <div>
        <table id="recursosMasUsados" class="display table table-bordered table-striped">
            <thead>
            <tr>
            <th>Recurso</th>
            <th>Cantidad de reservas</th>
            </tr>
            </thead>
            <tbody>
            <ui:repeat var="reserva" value="#{ReservationBean.consultarRecursosMasUsados()}">
                <tr>
                    <td>#{reserva.getResources().getName()}</td>
                    <td>#{reserva.amount}</td>
                </tr>
            </ui:repeat>
            </tbody>
        </table>
    </div>
    <br/>
    <h2>Recursos Menos Usados</h2>
    <div><p:chart type="bar" model="#{recursosMenosUsados.grafico}"/></div>
    <div>
        <table id="recursosMenosUsados" class="display table table-bordered table-striped">
            <thead>
            <tr>
                <th>Recurso</th>
                <th>Cantidad de reservas</th>
            </tr>
            </thead>
            <tbody>
            <ui:repeat var="reserva" value="#{ReservationBean.consultarRecursosMenosUsados()}">
                <tr>
                    <td>#{reserva.getResources().getName()}</td>
                    <td>#{reserva.amount}</td>
                </tr>
            </ui:repeat>
            </tbody>
        </table>
    </div>
    <br/>
    <h2>Reservas por carrera</h2>
    <div><p:chart type="bar" model="#{recursosPorCarrera.grafico}"/></div>
    <div>
        <table id="recursosPorCarrera" class="display table table-bordered table-striped">
            <thead>
            <tr>
                <th>Carrera</th>
                <th>Cantidad de reservas</th>
            </tr>
            </thead>
            <tbody>
            <ui:repeat var="reserva" value="#{ReservationBean.consultarReservaPorCarrera()}">
                <tr>
                    <td>#{reserva.getUname().getCareer()}</td>
                    <td>#{reserva.amount}</td>
                </tr>
            </ui:repeat>
            </tbody>
        </table>
    </div>

    <br/>
    <h2>Reservas Recurrentes</h2>
    <div><p:chart type="bar" model="#{reservasRecurrentes.grafico}"/></div>
    <div>
        <table id="reservasRecurrentes" class="display table table-bordered table-striped">
            <thead>
            <tr>
                <th>Recurso</th>
                <th>Cantidad de reservas recurrentes</th>
            </tr>
            </thead>
            <tbody>
            <ui:repeat var="reserva" value="#{ReservationBean.consultarReservaRecurrentes()}">
                <tr>
                    <td>#{reserva.getResources().getName()}</td>
                    <td>#{reserva.amount}</td>
                </tr>
            </ui:repeat>
            </tbody>
        </table>
    </div>

    <br/>
    <h2>Reservas Canceladas</h2>
    <div><p:chart type="bar" model="#{reservasCanceladas.grafico}"/></div>
    <div>
        <table id="reservasCanceladas" class="display table table-bordered table-striped">
            <thead>
            <tr>
                <th>Recurso</th>
                <th>Cantidad de reservas canceladas</th>
            </tr>
            </thead>
            <tbody>
            <ui:repeat var="reserva" value="#{ReservationBean.consultarReservasCanceladas()}">
                <tr>
                    <td>#{reserva.getResources().getName()}</td>
                    <td>#{reserva.amount}</td>
                </tr>
            </ui:repeat>
            </tbody>
        </table>
    </div>

    <br/>
    <h2>Horarios con mayor ocupacion</h2>
    <div>
        <table id="horarioMayorOcupacion" class="display table table-bordered table-striped">
            <thead>
            <tr>
                <th>Horario Inicial</th>
                <th>Horario Final</th>
                <th>Cantidad de reservas</th>
            </tr>
            </thead>
            <tbody>
            <ui:repeat var="reserva" value="#{ReservationBean.consultarHorarioMayorOcupacion()}">
                <tr>
                    <td>#{reserva.getStartHour()}</td>
                    <td>#{reserva.getFinishHour()}</td>
                    <td>#{reserva.amount}</td>
                </tr>
            </ui:repeat>
            </tbody>
        </table>
    </div>

    <br/>
    <h2>Horarios con menor ocupacion</h2>
    <div>
        <table id="horarioMenorOcupacion" class="display table table-bordered table-striped">
            <thead>
            <tr>
                <th>Horario Inicial</th>
                <th>Horario Final</th>
                <th>Cantidad de reservas</th>
            </tr>
            </thead>
            <tbody>
            <ui:repeat var="reserva" value="#{ReservationBean.consultarHorarioMenorOcupacion()}">
                <tr>
                    <td>#{reserva.getStartHour()}</td>
                    <td>#{reserva.getFinishHour()}</td>
                    <td>#{reserva.amount}</td>
                </tr>
            </ui:repeat>
            </tbody>
        </table>
    </div>

</h:body>
</html>